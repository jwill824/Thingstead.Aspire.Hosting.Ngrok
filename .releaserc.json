{
  "branches": ["main"],
  "plugins": [
    "@semantic-release/commit-analyzer",
    "@semantic-release/release-notes-generator",
    ["@semantic-release/changelog", { "changelogFile": "CHANGELOG.md" }],
    ["@semantic-release/exec", {
      "prepareCmd": "dotnet pack Thingstead.Aspire.Hosting.Ngrok.csproj -c Release -p:PackageVersion=${nextRelease.version} -o ./artifacts",
      "publishCmd": "\"sh\" -c \"if [ -n '$NUGET_API_KEY' ]; then echo 'Using NUGET_API_KEY to push packages'; dotnet nuget push ./artifacts/*.nupkg -s https://nuget.pkg.github.com/$GITHUB_REPOSITORY_OWNER/index.json -k $NUGET_API_KEY --skip-duplicate; elif [ -n '$GITHUB_TOKEN' ]; then echo 'Using GITHUB_TOKEN to push packages'; dotnet nuget push ./artifacts/*.nupkg -s https://nuget.pkg.github.com/$GITHUB_REPOSITORY_OWNER/index.json -k $GITHUB_TOKEN --skip-duplicate; else echo 'No NUGET_API_KEY or GITHUB_TOKEN found; failing publish step' 1>&2; exit 1; fi\""
    }],
    ["@semantic-release/git", {
      "assets": ["CHANGELOG.md", "Thingstead.Aspire.Hosting.Ngrok.csproj"],
      "message": "chore(release): ${nextRelease.version} [skip ci]\n\n${nextRelease.notes}"
    }],
    ["@semantic-release/github", { "assets": "./artifacts/*.nupkg" }]
  ]
}
